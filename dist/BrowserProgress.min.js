/*!
 * BrowserProgress - 一款小巧的伪进度条插件
 * @version v1.3.3
 * @author Junjie.Bai
 * @license MIT
 * 
 * git - git+https://github.com/baijunjie/browser-progress.git
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.BrowserProgress=e():t.BrowserProgress=e()}(window,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.css=function(t,e,i){if("object"===(void 0===e?"undefined":s(e)))for(var n in e)t.style[n]=e[n];else void 0!==i&&(t.style[e]=i);return this};var n=document.createElement("div");function o(t){if(t in n.style)return t;for(var e=t.charAt(0).toUpperCase()+t.substr(1),i=["Webkit","Moz","ms","O"],s=0,o=i.length;s<o;s++){var r=i[s]+e;if(r in n.style)return r}}var r=e.support={};r.transform=o("transform"),r.transition=o("transition"),r.transform3d=(n.style[r.transform]="",n.style[r.transform]="rotateY(90deg)",""!==n.style[r.transform]),n=null},function(t,e){t.exports=function(t,...e){e.forEach(e=>{t[e]=t[e].bind(t)})}},function(t,e,i){!function(e,i){"use strict";t.exports=function(){for(var t=window.requestAnimationFrame,e=window.cancelAnimationFrame,i=["ms","moz","webkit","o"],s=0;s<i.length&&!t;++s)t=window[i[s]+"RequestAnimationFrame"],e=window[i[s]+"CancelAnimationFrame"]||window[i[s]+"CancelRequestAnimationFrame"];e||(e=function(t){window.clearTimeout(t)});function n(){if(this._requestAnimationFrame=t,!this._requestAnimationFrame){var e=0;this._requestAnimationFrame=function(t){var i=(new Date).getTime(),s=Math.max(0,16-(i-e)),n=window.setTimeout(function(){t(i+s)},s);return e=i+s,n}}this._runFunc=[],this._active=!!this._runFunc.length,this._isRun=!0,this._timerID=0,this._loopCallback=r(this._loopCallback,this)}n.prototype={_loopCallback:function(){for(var t=this._runFunc.length;t--;)!1===this._runFunc[t]()&&this._runFunc.splice(t,1);this._runFunc.length?this._timerID=this._requestAnimationFrame.call(window,this._loopCallback):this._active=!1},add:function(t,e){return"function"!=typeof t?this:(e&&(t=r(t,e)),this._runFunc.unshift(t),this._active?this:(this._active=!0,this._isRun&&(this._timerID=this._requestAnimationFrame.call(window,this._loopCallback)),this))},remove:function(t){if("function"!=typeof t)return this._runFunc=[],this;for(var e=this._runFunc.length;e--;)if(this._runFunc[e].guid===t.guid)return this._runFunc.splice(e,1),this},stop:function(){return this._isRun?(this._isRun=!1,e(this._timerID),this):this},play:function(){return this._isRun?this:(this._isRun=!0,this._active&&(this._timerID=this._requestAnimationFrame.call(window,this._loopCallback)),this)}};var o=0;function r(t,e){if("string"==typeof e){var i=t[e];e=t,t=i}if("function"==typeof t){var s=Array.prototype.slice,n=s.call(arguments,2),r=function(){return t.apply(e||this,n.concat(s.call(arguments)))};return r.guid=t.guid=t.guid||o++,r}}return new n}()}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=a(i(2)),o=a(i(1)),r=i(0);function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._init(e)}return s(t,[{key:"_init",value:function(t){this._hideDuration=400,this._coeStep1=.1,this._coeStep2=.01,this._coeStep3=.3,this._coeStep4=.1,this._valueStep0=0,this._valueStep1=.2,this._valueStep2=.95,this._valueStep3=1,this._mind=.001*this._valueStep3,this._value=0,this._targetValue=0,this._coe=1,this._isRun=!1,this._isShow=!1,this._timerID=0,this._stepCallback=function(){},(0,o.default)(this,"_loadedHandle","_addDocument"),this._createElem(),this.color(t||"#000"),"complete"!==document.readyState&&(this.start(),this._addLoadEvent())}},{key:"_createElem",value:function(){this._progress=document.createElement("div"),this._progressHeadLeft=document.createElement("div"),this._progressHeadRight=document.createElement("div"),(0,r.css)(this._progress,{display:"none","-webkit-pointer-events":"none","pointer-events":"none","-webkit-user-select":"none","-moz-user-select":"none","user-select":"none",position:"fixed",right:"100%",top:0,"z-index":2147483647,width:"100%",height:"2px",opacity:1}),(0,r.css)(this._progressHeadLeft,{position:"absolute",right:"-80px",top:0,width:"180px",height:"100%",opacity:.6,"border-radius":"100%",clip:"rect(-6px,90px,14px,-6px)"}),(0,r.css)(this._progressHeadRight,{position:"absolute",right:0,top:0,width:"20px",height:"100%",opacity:.6,"border-radius":"100%",clip:"rect(-6px,22px,14px,10px)"}),this._progress.appendChild(this._progressHeadLeft),this._progress.appendChild(this._progressHeadRight),this._addDocument()}},{key:"_addDocument",value:function(){document.body?document.body.appendChild(this._progress):setTimeout(this._addDocument)}},{key:"_loadedHandle",value:function(){this.done()}},{key:"_addLoadEvent",value:function(){this._listenerLoad=!0,window.addEventListener?window.addEventListener("load",this._loadedHandle,!1):window.attachEvent?window.attachEvent("onload",this._loadedHandle):window.onload=this._loadedHandle}},{key:"_removeLoadEvent",value:function(){this._listenerLoad=!1,window.removeEventListener?window.removeEventListener("load",this._loadedHandle,!1):window.detachEvent?window.detachEvent("onload",this._loadedHandle):window.onload=null}},{key:"_run",value:function(){var t=this._value,e=this._targetValue-t,i=e*this._coe;if(Math.abs(e)>this._mind)t+=i,this._set(t);else{if(this._set(this._targetValue),this._targetValue!==this._valueStep1)return this._targetValue!==this._valueStep3&&this._targetValue!==this._valueStep0||this._hide(this._targetValue),this._isRun=!1,!1;this._coe=this._coeStep2,this._targetValue=this._valueStep2}}},{key:"_hide",value:function(t){if(this._isShow)return this._isShow=!1,this.fadeOut(this._progress,t?this._hideDuration:0),this}},{key:"_show",value:function(){if(!this._isShow)return this._isShow=!0,this._timerID>0&&(clearTimeout(this._timerID),this._timerID=0,this._fadeOutCallback()),(0,r.css)(this._progress,"display","block"),this}},{key:"_set",value:function(t){if(this._value=t,r.support.transform){var e="translate("+100*t+"%,0)";r.support.transform3d&&(e+=" translateZ(0)"),(0,r.css)(this._progress,r.support.transform,e)}else(0,r.css)(this._progress,"right",100*(this._valueStep3-t)+"%");return this._stepCallback(t),this}},{key:"appendTo",value:function(t,e){return t&&t.appendChild(this._progress),e&&(0,r.css)(this._progress,e),this}},{key:"color",value:function(t){return(0,r.css)(this._progress,"background",t),(0,r.css)(this._progressHeadLeft,"box-shadow","1px 0 6px 1px "+t),(0,r.css)(this._progressHeadRight,"box-shadow","1px 0 6px 1px "+t),this}},{key:"set",value:function(t){return this.stop(),(t=Math.max(this._valueStep0,Math.min(this._valueStep3,t)))<this._valueStep1?(this._coe=this._coeStep1,this._targetValue=this._valueStep1):t<this._valueStep2?(this._coe=this._coeStep2,this._targetValue=this._valueStep2):t<this._valueStep3&&(this._coe=this._coeStep3,this._targetValue=this._valueStep3),this._set(t),t===this._valueStep3||t===this._valueStep0?this._hide(t):this._show(),this}},{key:"stop",value:function(){return this._listenerLoad&&this._removeLoadEvent(),this._isRun?(this._isRun=!1,n.default.remove(this._run),this):this}},{key:"play",value:function(){return this._listenerLoad&&this._removeLoadEvent(),this._isRun?this:(this._isRun=!0,n.default.add(this._run,this),this)}},{key:"start",value:function(){return this._set(0),this._coe=this._coeStep1,this._targetValue=this._valueStep1,this._show(),this.play()}},{key:"done",value:function(){return this._coe=this._coeStep3,this._targetValue=this._valueStep3,this.play()}},{key:"fail",value:function(){return this._coe=this._coeStep4,this._targetValue=this._valueStep0,this.play()}},{key:"hide",value:function(){return(0,r.css)(this._progress,"visibility","hidden"),this}},{key:"show",value:function(){return(0,r.css)(this._progress,"visibility","visible"),this}},{key:"step",value:function(t){return this._stepCallback=t,this}},{key:"fadeOut",value:function(t,e,i){var s=this;return"function"==typeof e?(i=e,e=this._hideDuration):"number"!=typeof e&&(e=this._hideDuration),setTimeout(function(){if(e&&r.support.transition){var n=s._fadeOutCallback;s._fadeOutCallback=function(){n&&n.call(s),(0,r.css)(t,"display","none"),(0,r.css)(t,r.support.transition,""),(0,r.css)(t,"opacity",1),i&&i.call(s),s._fadeOutCallback=null},(0,r.css)(t,r.support.transition,"opacity "+e+"ms"),(0,r.css)(t,"opacity",0),s._timerID>0&&clearTimeout(s._timerID),s._timerID=setTimeout(function(){s._timerID=0,s._fadeOutCallback()},1e5)}else(0,r.css)(t,"display","none"),i&&i.call(s)}),this}}]),t}();e.default=new u,t.exports=e.default}])});